# 米库说话 - MMD模型文件

## 目录结构

```
/models/mikutalking/
├── v4c5.0short.pmx    # 默认模型文件
├── v4c5.0.pmx         # 完整版模型
├── texture/           # 纹理文件目录
│   ├── 头.png
│   ├── 头发.png
│   ├── 眼睛.png
│   ├── 身体.png
│   ├── 衣服.png
│   ├── 裙子.png
│   └── ...
└── spa/              # 球面贴图目录
    ├── spa-1.png
    ├── spa-2.png
    └── ...
```

## 使用说明

### 1. 模型文件
- `v4c5.0short.pmx` - 默认加载的模型文件
- `v4c5.0.pmx` - 完整版模型（可选）

### 2. 纹理文件 (texture/)
纹理文件用于给模型添加颜色和图案。系统会自动加载PMX文件中引用的纹理。

**当前纹理文件：**
- `头.png` - 头部纹理
- `头发.png`, `头发1.png`, `头发2.png` - 头发纹理
- `双马尾.png` - 双马尾纹理
- `后发.png`, `后发2.png` - 后发纹理
- `头发阴影.png` - 头发阴影
- `眼睛.png` - 眼睛纹理
- `身体.png` - 身体纹理
- `衣服.png` - 衣服纹理
- `袖子丝袜.png` - 袖子和丝袜纹理
- `裙子.png` - 裙子纹理
- `金属.png` - 金属装饰纹理
- `effect.png` - 特效纹理

### 3. 球面贴图 (spa/)
SPA文件用于添加光泽和反射效果，使模型更加逼真。

**当前SPA文件：**
- `spa-1.png` 到 `spa-6.png` - 各种材质的环境反射贴图

## 纹理加载机制

系统会：
1. 解析PMX模型文件
2. 读取材质中的纹理引用
3. 自动从 `texture/` 目录加载对应纹理
4. 自动从 `spa/` 目录加载球面贴图
5. 应用到3D模型上

## 支持的文件格式
- **模型**: PMX (.pmx)
- **纹理**: PNG, JPG, TGA, BMP
- **动画**: VMD (.vmd) - 计划支持

## 故障排除

如果纹理没有显示：
1. 检查浏览器控制台查看纹理加载错误
2. 确保纹理文件名与PMX中的引用完全匹配（包括扩展名）
3. 确保纹理文件在正确的目录下（texture/ 或 spa/）
4. 刷新浏览器清除缓存

## 查看材质信息

打开浏览器控制台，查找 `📦 PMX材质列表` 日志，可以看到：
- 每个材质的索引
- 材质名称
- 引用的纹理文件名
- 引用的球面贴图文件名

这有助于调试纹理加载问题。
