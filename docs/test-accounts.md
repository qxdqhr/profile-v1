# 测试账号文档

本文档记录了项目中的测试账号信息，供开发和测试时使用。

## 🔐 测试环境账号

*注意：测试环境目前主要通过微信登录使用，手机号登录的预设账号需要手动创建。*

### 管理员账号
- **手机号**: `13800138000`
- **密码**: `admin123456`
- **姓名**: 系统管理员
- **角色**: `admin`
- **权限**: 拥有所有系统权限
- **用途**: 系统管理、配置修改、用户管理等

### 普通用户账号
- **手机号**: `13900139000`
- **密码**: `test123456`
- **姓名**: 测试用户
- **角色**: `user`
- **权限**: 普通用户权限
- **用途**: 功能测试、用户体验测试

### 演示账号
- **手机号**: `13700137000`
- **密码**: `demo123456`
- **姓名**: 演示用户
- **角色**: `user`
- **权限**: 普通用户权限
- **用途**: 演示展示、客户体验

### 当前测试环境用户
- **微信用户**: `微信用户_demo_cod`
- **角色**: `user`
- **权限**: 普通用户权限
- **登录方式**: 微信登录
- **状态**: ✅ 活跃
- **注册时间**: 2025年8月6日

## 🌍 生产环境账号

### 管理员账号
- **手机号**: `13800138000`
- **密码**: `admin123456`
- **姓名**: 系统管理员
- **角色**: `admin`
- **权限**: 拥有所有系统权限
- **用途**: 生产环境系统管理、配置修改、用户管理等
- **最后登录**: 2025年7月31日
- **状态**: ✅ 活跃

### 普通用户账号（预设测试账号）
- **手机号**: `13900139000`
- **密码**: `test123456`
- **姓名**: 测试用户
- **角色**: `user`
- **权限**: 普通用户权限
- **用途**: 生产环境功能测试、用户体验测试
- **最后登录**: 2025年5月31日
- **状态**: ✅ 活跃

### 演示账号
- **手机号**: `13700137000`
- **密码**: `demo123456`
- **姓名**: 演示用户
- **角色**: `user`
- **权限**: 普通用户权限
- **用途**: 生产环境演示展示、客户体验
- **最后登录**: 从未登录
- **状态**: ✅ 活跃

### 实际注册用户账号

#### 用户 1
- **手机号**: `15601345849`
- **姓名**: 未设置
- **角色**: `user`
- **权限**: 普通用户权限
- **最后登录**: 2025年8月17日
- **状态**: ✅ 活跃
- **注册时间**: 2025年8月17日

#### 用户 2  
- **手机号**: `13453015648`
- **姓名**: holt
- **角色**: `user`
- **权限**: 普通用户权限
- **最后登录**: 2025年8月17日
- **状态**: ✅ 活跃
- **注册时间**: 2025年8月17日

#### 用户 3
- **手机号**: `13522709269`
- **姓名**: 潇潇
- **角色**: `user`
- **权限**: 普通用户权限
- **最后登录**: 2025年7月24日
- **状态**: ✅ 活跃
- **注册时间**: 2025年7月24日

## 🛠️ 管理命令

### 查询所有用户信息
```bash
# 查询测试环境用户
pnpm run devdb:queryusers

# 查询生产环境用户
pnpm run prodb:queryusers
```

### 创建/更新测试账号
```bash
# 测试环境
pnpm run devdb:createusers

# 生产环境
pnpm run prodb:createusers
```

### 数据库管理
```bash
# 启动数据库管理面板（测试环境）
pnpm run devdb:studio

# 启动数据库管理面板（生产环境）
pnpm run prodb:studio
```

## 🔒 安全特性

### 密码安全
- 所有密码使用 `bcrypt` 进行哈希存储
- 盐值轮数: `12`（统一标准）
- 密码最小长度: 6位
- 不在API响应中返回密码字段

### 会话管理
- 使用 HttpOnly Cookie 存储会话令牌
- 会话有效期: 30天
- 自动清理过期会话
- 支持多设备登录

### 权限控制
- 基于角色的权限系统（RBAC）
- `admin`: 管理员权限
- `user`: 普通用户权限
- 前端权限守卫组件保护

## 📝 使用说明

### 开发环境快速登录
在开发环境中，登录界面提供快捷按钮：
- 点击"管理员账号"按钮自动填充管理员登录信息
- 点击"用户账号"按钮自动填充普通用户登录信息

### API端点
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/logout` - 用户登出
- `GET /api/auth/validate` - 验证会话

### 调试信息
所有认证相关操作都有详细的控制台日志输出，便于开发调试：
- 登录流程日志
- 密码验证日志
- 会话管理日志
- 权限验证日志

## ⚠️ 注意事项

1. **仅限测试使用**: 这些账号仅用于开发和测试，不要在生产环境中使用
2. **定期更新**: 建议定期更新测试账号密码
3. **权限控制**: 确保生产环境中没有测试账号
4. **日志安全**: 生产环境中应关闭密码相关的调试日志

## 🔄 密码重置

如果需要重置账号密码，可以：
1. 重新运行创建脚本（会更新现有账号）
2. 使用数据库管理面板直接修改
3. 通过忘记密码功能（如果已实现）

## 📞 技术支持

如有问题，请检查：
1. 数据库连接是否正常
2. 环境变量是否正确配置
3. 密码哈希算法是否一致
4. 会话Cookie设置是否正确

## 📊 数据库统计

### 测试环境
- **总用户数**: 1
- **管理员数量**: 0  
- **普通用户数量**: 1
- **活跃用户**: 1
- **有登录记录**: 0

### 生产环境
- **总用户数**: 6
- **管理员数量**: 1
- **普通用户数量**: 5
- **活跃用户**: 6
- **有登录记录**: 5

---

*最后更新时间: 2025年1月2日*
*创建时间: 2024年12月26日*
*数据查询时间: 2025年1月2日* 